<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>
  <div id="container"></div>
</body>
</html>
<!-- The core React library -->
<script src="http://fb.me/react-0.12.2.js"></script>
<!-- In-browser JSX transformer, remove when pre-compiling JSX. -->
<script src="http://fb.me/JSXTransformer-0.12.2.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/i18n/grid.locale-en.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/jquery.jqGrid.src.js"></script>

<script type="text/jsx">
	var ReactJqGrid = React.createClass({
		componentDidMount: function() {
			var element = this.getDOMNode();

			jQuery(element).find("#eventsgrid").jqGrid({
		        datatype: function(postdata) {
					//var data = [{ title: "Daniel" }, {title: "Comas"}, {title: "Fernández"} ];

					var result = {
					"rows":[{'title':'Daniel'},{'title':'Comas'}, {title: "Fernández"}],
					"records":3,
					"total":2,
					"page":1
					};

					if (postdata.page == 1 && postdata.sord == "asc") {
						result = {
						"rows":[{'title':'Fernández'},{'title':'Comas'}, {title: "Daniel"}],
						"records":3,
						"total":2,
						"page":1
						};						
					}

					if(postdata.page == 2) {
						result = {
						"rows":[{'title':'Ingens'},{'title':'Networks'}],
						"records":5,
						"total":2,
						"page":2
						};
					}

					console.log(postdata);

		        	jQuery(element).find("#eventsgrid")[0].addJSONData(result);
		        	//console.log(x);
		        	//jQuery(element).jqGrid('addJSONData', data);
		        	//jQuery(element).jqGrid('addRowData', 0, data);
		        	//jQuery(element).setGridParam({ data: data }).trigger('reloadGrid');		
		        },
		        colNames: ['Title'],
		        colModel: [
		                    { name: 'title', index: 'title', sortable: true }
		        ],
		        rowNum: 3,
		        pager: '#eventsgridpager',
		        sortname: '',
		        viewrecords: true,
		        sortorder: "desc",
		        caption: "",
		        autowidth: true,
		        loadOnce: true,
		        scrollOffset: false,
		        height: '',
		        subGrid: false,
		        onSelectRow: function (rowid, status, e) {
		            alert(rowid);
		        },
		        loadComplete: function (maingrid_id) {
		            alert(maingrid_id);
		        }
		    });
		},
	 	render: function() {
	    	return <div><input type="button" value="select first" onClick={this.handleClick} /><table id="eventsgrid"></table><div id="eventsgridpager"></div></div>;
	  	},
	  	handleClick: function() {
		    // Explicitly focus the text input using the raw DOM API.
		    var element = this.getDOMNode();
			jQuery(element).find("#eventsgrid").setSelection(1, true);
		}
	});
	React.render(
	  <ReactJqGrid />,
	  document.getElementById('container')
	);
</script>
